# Review service
# Manage product reviews
version: v0.0.4
name: review
ingressAdapters:
# Get reviews for product
- stateless:
    variant: rest
    action: read
    route: get
  steps:
  - egressAdapter:
      stateful:
        name: customer-db
        variant: mongo
        action: read
        size: medium

# write reviews for product
- stateless:
    variant: rest
    action: write
    route: post
  steps:
  - egressAdapter:
      stateless:
        variant: rest
        service: auth
        action: read
        route: authenticate
  - egressAdapter:
      stateful:
        name: customer-db
        variant: mongo
        action: write
        size: small
  - egressAdapter:
      stateless:
        variant: rest
        service: user-preference
        action: write
        route: update
  - egressAdapter:
      stateless:
        variant: rest
        service: recommendation
        action: write
        route: update
